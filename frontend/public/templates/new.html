<!doctype html> 
<html> 
<head><meta charset="utf-8"><title>Nueva Template</title> 
<style>body{font-family:Arial;max-width:700px;margin:20px auto;padding:0 
12px}input,textarea,select{width:100%;padding:8px;margin-top:6px;border:1px solid 
#ccc;border-radius:6px}</style> 
</head> 
<body> 
 
<h1>Crear Template</h1> 
 
<form id="form"> 
  <label>Nombre<input required name="name"></label> 
 
  <label>Descripci√≥n<textarea name="description" rows="4"></textarea></label> 
 
  <label>Prioridad 
    <select name="priority"> 
      <option value="MEDIUM">MEDIUM</option> 
      <option value="HIGH">HIGH</option> 
      <option value="LOW">LOW</option> 
    </select> 
  </label> 
 
  <label>Team ID<input type="number" name="teamId"></label> 
 
  <label>Tags (IDs separados por coma)<input name="tags" placeholder="1, 2, 3"></label> 
 
  <button style="margin-top:12px">Guardar</button> 
  <button type="button" onclick="location.href='/templates'" 
style="margin-left:8px">Cancelar</button> 
</form> 
 
<div id="msg" style="color:red;margin-top:10px"></div> 
 
<script> 
const USER_ID = 1; 
 
document.getElementById("form").onsubmit = async (e)=>{ 
  e.preventDefault(); 
  const fd = new FormData(e.target); 
  const body = { 
    name: fd.get("name"), 
    description: fd.get("description") || undefined, 
    priority: fd.get("priority"), 
    teamId: fd.get("teamId") ? Number(fd.get("teamId")) : undefined, 
    tags: fd.get("tags") ? fd.get("tags").split(",").map(x=>Number(x.trim())) : [] 
  }; 
 
  const res = await fetch("/templates", { 
    method:"POST", 
    headers:{ "Content-Type":"application/json", "x-user-id":USER_ID }, 
    body:JSON.stringify(body) 
  }); 
 
  if(res.ok){ 
    location.href="/templates"; 
  } else { 
    const err = await res.json(); 
    document.getElementById("msg").innerText = err.error || JSON.stringify(err); 
  } 
}; 
</script> 
 
</body> 
</html>
